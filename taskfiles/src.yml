# Reference source repos (.src/ â€” cloned for learning/reference)
# Usage: task src:clone, task src:update
version: '3'

vars:
  SRC_DIR: .src

tasks:
  clone:
    cmds:
      - task: src-humaclient
      - task: src-huma
      - task: src-restish
      - task: src-datastar-go
      - task: src-datastar-skills
      - task: src-nornicdb

  update:
    cmds:
      - for d in {{.SRC_DIR}}/*/; do echo "--- $d ---" && git -C "$d" pull --ff-only 2>/dev/null || true; done

  src-humaclient:
    status:
      - test -d {{.SRC_DIR}}/humaclient
    cmds:
      - git clone https://github.com/danielgtaylor/humaclient {{.SRC_DIR}}/humaclient

  src-huma:
    status:
      - test -d {{.SRC_DIR}}/huma
    cmds:
      - git clone https://github.com/danielgtaylor/huma {{.SRC_DIR}}/huma

  src-restish:
    status:
      - test -d {{.SRC_DIR}}/restish
    cmds:
      - git clone https://github.com/rest-sh/restish {{.SRC_DIR}}/restish

  src-datastar-go:
    status:
      - test -d {{.SRC_DIR}}/datastar-go
    cmds:
      - git clone https://github.com/starfederation/datastar {{.SRC_DIR}}/datastar-go

  src-datastar-skills:
    status:
      - test -d {{.SRC_DIR}}/datastar-skills
    cmds:
      - git clone https://github.com/starfederation/datastar-skills {{.SRC_DIR}}/datastar-skills

  src-nornicdb:
    status:
      - test -d {{.SRC_DIR}}/nornicdb
    cmds:
      - git clone https://github.com/orneryd/NornicDB {{.SRC_DIR}}/nornicdb
